{% extends "base.html" %}

{% block content %}
<div class="flex_center" style="justify-content: space-between; margin-bottom: 20px;">
    <h2>{{ subject.name|lower }}</h2>
    <div class="flex_center">
        <span class="subject_badge" style="--sub-color: {{ subject.color_tag }}">
            active
        </span>
        <a href="{{ url_for('delete_subject', subject_id=subject.subject_id) }}" class="button_main button_danger">delete</a>
    </div>
</div>

<div class="grid_layout">
    <div class="card_box">
        <h3>tasks</h3>
        {% for task in subject.tasks %}
            <div class="session_row">
                <span>{{ task.title|lower }}</span>
                <a href="{{ url_for('complete_task', task_id=task.task_id) }}" class="button_main button_secondary">check</a>
            </div>
        {% endfor %}
    </div>

    <div class="card_box">
        <h3>study history</h3>
        {% for s in subject.study_sessions|sort(attribute='start_time', reverse=True) %}
            <div class="session_row">
                <strong>{{ s.duration }}m</strong>
                <span style="font-size: 0.8em; color: #888;">{{ s.start_time.strftime('%H:%M') }}</span>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}